(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var o=n.getElementsByTagName("script");if(o.length)for(var i=o.length-1;i>-1&&!t;)t=o[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,e.p,document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelectorAll(".categorySearch"),t=document.querySelector(".categoryContent"),n=document.querySelector("#homeContent"),o=document.querySelector(".pagination"),i={meat:"Мясо",bird:"Птица",fish:"Рыба",soups:"Супы",porridge:"Каши",salads:"Салаты",vegetables:"Овощи",bakery:"Выпечка"};for(let r=0;r<e.length;r++)e[r].addEventListener("click",(function(){let c=e[r].dataset.category,l=new FormData;l.append("category",c),fetch(`/home/${c}`,{method:"POST",body:l}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.text()})).then((e=>{n.remove(),o.remove(),document.title="Категория - "+i[c],t.innerHTML=e})).catch((e=>{console.error("Fetch error:",e)}))}))})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector(".contentBodyRecies"),t=document.querySelector(".btnAddIngridient"),n=0;t.addEventListener("click",(async function(t){t.preventDefault(),n++;let o=document.createElement("div");o.setAttribute("class","divSelect"),o.innerHTML=`\n    <div class="ingridientsConteinerBtn">\n      <h6 name="ingridients[${n}][name]" class="titleIngridient">Ингредиент № ${n}</h6>\n      <input type="text" list="ingridients[${n}][name]" name="ingridients[${n}][name]" id="ingredientSelect">\n      <datalist id="ingridients[${n}][name]"></datalist>\n      <div class="contentNumber">\n          <div class="numberSelect">\n            <p>Единица измерения</p>\n            <select name="ingridients[${n}][measurement]" id="measurement" value="Кол-во">\n                <option>Грамм</option>\n                <option>Килограмм</option>\n                <option>Литр</option>\n                <option>Миллилитр</option>\n                <option>Шт</option>\n                <option>Стакан</option>\n                <option>Ст. ложки</option>\n                <option>Чайной ложки</option>\n                <option>Щепотки</option>\n                <option>Капли</option>\n                <option>Часть</option>\n                <option>По вкусу</option>\n                <option>Ломтик</option>\n                <option>Пучок</option>\n                <option>Банка</option>\n                <option>На 100 грамм</option>\n            </select>\n          </div>\n          <div class="numberInput">\n              <p>Колличество</p>\n              <input type="number" name="ingridients[${n}][number]">\n          </div>\n      </div>\n    </div>\n     `;let i=o.querySelector("input"),r=o.querySelector("datalist");i.addEventListener("input",(async()=>{try{const e=await fetch("/api/ingredients"),t=await e.json();r.innerHTML="",t.filter((e=>e.name.toLowerCase().includes(i.value.toLowerCase()))).forEach((e=>{let t=document.createElement("option");t.value=e.name,t.text=e.name,r.appendChild(t)}))}catch(e){console.error(e)}})),e.appendChild(o)}))})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector(".removeIngtidients"),t=document.querySelector(".btnEditIngridient"),n=document.querySelector(".recipesIngridients");e.addEventListener("click",(function(o){o.preventDefault(),t.style.display="block",n.remove(),e.style.display="none"}));let o=document.querySelector(".contentBodyRecies"),i=0;t.addEventListener("click",(async function(e){e.preventDefault(),i++;let t=document.createElement("div");t.setAttribute("class","divSelect"),t.innerHTML=`\n      <div class="ingridientsConteinerBtn">\n        <h6 name="ingridients[${i}][name]" class="titleIngridient">Ингредиент № ${i}</h6>\n        <input type="text" list="ingridients[${i}][name]" name="ingridients[${i}][name]" id="ingredientSelect">\n        <datalist id="ingridients[${i}][name]"></datalist>\n        <div class="contentNumber">\n            <div class="numberSelect">\n              <p>Единица измерения</p>\n              <select name="ingridients[${i}][measurement]" id="measurement" value="Кол-во">\n                  <option>Грамм</option>\n                  <option>Килограмм</option>\n                  <option>Литр</option>\n                  <option>Миллилитр</option>\n                  <option>Шт</option>\n                  <option>Стакан</option>\n                  <option>Ст. ложки</option>\n                  <option>Чайной ложки</option>\n                  <option>Щепотки</option>\n                  <option>Капли</option>\n                  <option>Часть</option>\n                  <option>По вкусу</option>\n                  <option>Ломтик</option>\n                  <option>Пучок</option>\n                  <option>Банка</option>\n                  <option>На 100 грамм</option>\n              </select>\n            </div>\n            <div class="numberInput">\n                <p>Колличество</p>\n                <input type="number" name="ingridients[${i}][number]">\n            </div>\n        </div>\n      </div>\n       `;let n=t.querySelector("input"),r=t.querySelector("datalist");n.addEventListener("input",(async()=>{try{const e=await fetch("/api/ingredients"),t=await e.json();r.innerHTML="",t.filter((e=>e.name.toLowerCase().includes(n.value.toLowerCase()))).forEach((e=>{let t=document.createElement("option");t.value=e.name,t.text=e.name,console.log("Adding option:",t.value),r.appendChild(t)}))}catch(e){console.error(e)}})),o.appendChild(t)}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".exitToken").addEventListener("click",(function(e){e.preventDefault(),console.log("exitToken click"),document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href="/"}))})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector(".categoryContent"),t=document.querySelector("#homeContent"),n=document.querySelector(".pagination"),o=document.querySelector(".contentMainMenu");document.body.addEventListener("click",(function(i){if(i.target.classList.contains("fullCategoryDescription")){let r=i.target.dataset.id;fetch(`/home/${r}`,{method:"POST",body:JSON.stringify({elemId:r}),headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.text()})).then((i=>{e.innerHTML=i,n.style.display=" none",t.remove(),o.remove();let c=document.querySelector(".textCommentBtn"),l=document.querySelector(".commentForm");c.addEventListener("click",(function(){l.style.display=" block",c.style.display=" none"}));let a=document.querySelector(".textAreaSubmit"),d=document.querySelector(".textAreaCommit"),s=document.querySelector(".commentAdd");a.addEventListener("click",(function(){let e=d.value,t=new FormData;t.append("id",r),t.append("comments",d.value);let n=document.querySelector(".recipes-form-image");if(n.files.length>0)for(let e=0;e<n.files.length;e++){let o=n.files[e];t.append("image",o);let i=o.name;t.append("imagePath",i)}else console.log("No files are selected");fetch(`/home/${e}`,{method:"POST",body:t}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.text()})).then((e=>{l.style.display=" none",c.style.display=" block",s.innerHTML=e})).catch((e=>{console.error("Fetch error:",e)}))}))})).catch((e=>{console.error("Fetch error:",e)}))}}))})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelectorAll(".fullDescription"),t=document.querySelector(".categoryContent"),n=document.querySelector("#homeContent"),o=document.querySelector(".pagination"),i=document.querySelector(".contentMainMenu");for(let r=0;r<e.length;r++)e[r].addEventListener("click",(function(){let e=this.dataset.id,r=this.dataset.title,c=new FormData;c.append("elemId",e),fetch(`/home/${e}`,{method:"POST",body:c}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.text()})).then((c=>{t.innerHTML=c,document.title=r,o.style.display=" none",n.remove(),i.remove();let l=document.querySelector(".textCommentBtn"),a=document.querySelector(".commentForm");l.addEventListener("click",(function(){a.style.display=" block",l.style.display=" none"}));let d=document.querySelector(".textAreaSubmit"),s=document.querySelector(".textAreaCommit"),u=document.querySelector(".commentAdd");d.addEventListener("click",(function(){let t=s.value,n=new FormData;n.append("id",e),n.append("comments",s.value);let o=document.querySelector(".recipes-form-image");if(o.files.length>0)for(let e=0;e<o.files.length;e++){let t=o.files[e];n.append("image",t);let i=t.name;n.append("imagePath",i)}else console.log("No files are selected");fetch(`/home/${t}`,{method:"POST",body:n}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.text()})).then((e=>{a.style.display=" none",l.style.display=" block",u.innerHTML=e})).catch((e=>{console.error("Fetch error:",e)}))}))})).catch((e=>{console.error("Fetch error:",e)}))}))})),document.addEventListener("DOMContentLoaded",(function(){console.log("home");let e=document.querySelectorAll(".plus"),t=document.querySelectorAll(".minus");e.forEach((e=>{e.addEventListener("click",(function(){e.previousElementSibling.value++;let t=e.previousElementSibling.value;e.parentElement.closest(".recipesIdelementIngridient").querySelectorAll(".number").forEach((e=>{let n=e.value/t;e.value=(Number(e.value)+n).toFixed(1)}))}))})),t.forEach((e=>{e.addEventListener("click",(function(){let t=e.previousElementSibling.previousElementSibling.value,n=e.parentElement.closest(".recipesIdelementIngridient").querySelectorAll(".number");e.previousElementSibling.previousElementSibling.value>=1&&(n.forEach((e=>{let n=e.value/t;e.value=(Number(e.value)-n).toFixed(1)})),e.previousElementSibling.previousElementSibling.value--)}))}))})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelectorAll(".likeBtnContent");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(){let e=this.dataset.id,t=new FormData;t.append("recipeId",e),fetch("/home/likes",{method:"POST",body:t}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.text()})).then((e=>{this.closest(".like").querySelector(".pLike").innerHTML=e})).catch((e=>{console.error("Fetch error:",e)}))}))})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelectorAll("#lunchContent"),t=document.querySelector(".categoryContent"),n={breakfast:"Завтрак",lunch:"Обед",supper:"Ужин",snack:"Перекус"};for(let o=0;o<e.length;o++)e[o].addEventListener("click",(function(){let i=e[o].dataset.lunch;console.log("dataLunch",i);let r=new FormData;r.append("lunch",i),fetch("/home/lunch",{method:"POST",body:r}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.text()})).then((e=>{homeContent.remove(),pagination.remove(),t.innerHTML=e,document.title="Категория - "+n[i]})).catch((e=>{console.error("Fetch error:",e)}))}))}));let t=document.querySelector(".pagination"),n=document.querySelectorAll(".elementIngridient"),o=10,i=1;function r(e){let n=document.createElement("button");n.classList.add("page-link"),n.textContent=e,n.addEventListener("click",(function(){i=e,c(),l()})),t.appendChild(n)}function c(){for(let e=0;e<n.length;e++)n[e].style.display=e<(i-1)*o||e>=i*o?"none":"block"}function l(){document.querySelectorAll(".page-link").forEach(((e,t)=>{t+1===i?e.classList.add("active"):e.classList.remove("active")}))}for(let e=0;e<n.length;e++)e%o==0&&r(e/o+1);l(),c();let a=document.getElementById("passwordInput"),d=document.getElementById("confirmPasswordInput"),s=document.getElementById("confirmPasswordError"),u=document.getElementById("emailInput"),p=document.getElementById("loginInput");d.addEventListener("input",(function(){let e=a.value,t=d.value;s.style.display=e===t||""===t?"none":"block"})),u.addEventListener("input",(async function(){let e=u.value;try{await fetch(`/check-email?email=${e}`)}catch(e){console.error(e)}})),p.addEventListener("input",(async function(){let e=p.value;try{await fetch(`/check-login?login=${e}`)}catch(e){console.error(e)}}));let m=document.getElementById("passwordCheckbox1");m.addEventListener("change",(function(){y("passwordInput",m)}));let h=document.getElementById("passwordCheckbox2");function y(e,t){document.getElementById(e).type=t.checked?"text":"password"}h.addEventListener("change",(function(){y("confirmPasswordInput",h)}))})();